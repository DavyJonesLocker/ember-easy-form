// ==========================================================================
// Project:   Ember EasyForm
// Copyright: Â©2013 DockYar, LLC. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================


// Last commit: 7db5ed9 (2013-09-16 14:34:58 -0400)


!function(){Ember.EasyForm=Ember.Namespace.create({VERSION:"1.0.0.beta.1"})}(),function(){Ember.EasyForm.Config=Ember.Namespace.create({_wrappers:{"default":{formClass:"",fieldErrorClass:"fieldWithErrors",inputClass:"input",errorClass:"error",hintClass:"hint",labelClass:"",wrapControls:!1,controlsWrapperClass:""}},_inputTypes:{},registerWrapper:function(e,t){this._wrappers[e]=Ember.$.extend({},this._wrappers["default"],t)},getWrapper:function(e){var t=this._wrappers[e];return t},registerInputType:function(e,t){this._inputTypes[e]=t},getInputType:function(e){return this._inputTypes[e]}})}(),function(){Ember.Handlebars.registerHelper("error-field",function(e,t){return t=Ember.EasyForm.processOptions(e,t),t.hash.propertyBinding&&(t.hash.property=Ember.Handlebars.get(this,t.hash.propertyBinding,t)),Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Error,t)})}(),function(){Ember.Handlebars.registerHelper("form-for",function(e,t){return t.hash.contentBinding=e,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Form,t)})}(),function(){Ember.Handlebars.registerHelper("hint-field",function(e,t){return t=Ember.EasyForm.processOptions(e,t),t.hash.text||t.hash.textBinding?Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Hint,t):void 0})}(),function(){Ember.Handlebars.registerHelper("input",function(e,t){return t=Ember.EasyForm.processOptions(e,t),t.hash.isBlock=!!t.fn,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Input,t)})}(),function(){Ember.Handlebars.registerHelper("input-field",function(e,t){t=Ember.EasyForm.processOptions(e,t),t.hash.propertyBinding&&(t.hash.property=Ember.Handlebars.get(this,t.hash.propertyBinding,t)),t.hash.inputOptionsBinding&&(t.hash.inputOptions=Ember.Handlebars.get(this,t.hash.inputOptionsBinding,t)),e=t.hash.property;var r=this,s=function(e){var t=(r.get("content")||r).constructor;return t.proto?Ember.meta(t.proto(),!1).descs[e]:null};if(t.hash.valueBinding=e,t.hash.viewName="input-field-"+t.data.view.elementId,t.hash.inputOptions){var i,n=t.hash.inputOptions;for(i in n)n.hasOwnProperty(i)&&(t.hash[i]=n[i]);delete t.hash.inputOptions}if(t.hash.inputConfig)for(var a=t.hash.inputConfig.split(";"),o=a.length;o--;){var p=a[o].split(":");t.hash[p[0]]=p[1]}if("text"===t.hash.as)return Ember.Handlebars.helpers.view.call(r,Ember.EasyForm.TextArea,t);if("select"===t.hash.as)return delete t.hash.valueBinding,t.hash.contentBinding=t.hash.collection,t.hash.selectionBinding=t.hash.selection,t.hash.valueBinding=t.hash.value,Ember.Handlebars.helpers.view.call(r,Ember.EasyForm.Select,t);if(t.hash.as){var h=Ember.EasyForm.Config.getInputType(t.hash.as);if(h)return Ember.Handlebars.helpers.view.call(r,h,t);t.hash.type=t.hash.as}else if(e.match(/password/))t.hash.type="password";else if(e.match(/email/))t.hash.type="email";else if(e.match(/url/))t.hash.type="url";else if(e.match(/color/))t.hash.type="color";else if(e.match(/^tel/))t.hash.type="tel";else if(e.match(/search/))t.hash.type="search";else if("number"===s(e)||"number"==typeof r.get(e))t.hash.type="number";else if("date"===s(e)||!Ember.isNone(r.get(e))&&r.get(e).constructor===Date)t.hash.type="date";else if("boolean"===s(e)||!Ember.isNone(r.get(e))&&r.get(e).constructor===Boolean)return t.hash.checkedBinding=e,Ember.Handlebars.helpers.view.call(r,Ember.EasyForm.Checkbox,t);return Ember.Handlebars.helpers.view.call(r,Ember.EasyForm.TextField,t)})}(),function(){Ember.Handlebars.registerHelper("label-field",function(e,t){return t=Ember.EasyForm.processOptions(e,t),t.hash.viewName="label-field-"+t.data.view.elementId,Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Label,t)})}(),function(){Ember.Handlebars.registerHelper("submit",function(e,t){return"object"==typeof e&&(t=e,e=void 0),t.hash.context=this,t.hash.value=e||"Submit",Ember.Handlebars.helpers.view.call(this,Ember.EasyForm.Submit,t)})}(),function(){Ember.EasyForm.BaseView=Ember.View.extend({getWrapperConfig:function(e){var t=Ember.EasyForm.Config.getWrapper(this.get("wrapper"));return t[e]},wrapper:Ember.computed(function(){for(var e=this.get("parentView");e;){var t=e.get("wrapper");if(t)return t;e=e.get("parentView")}return"default"})})}(),function(){Ember.EasyForm.Checkbox=Ember.Checkbox.extend()}(),function(){Ember.EasyForm.Error=Ember.EasyForm.BaseView.extend({tagName:"span",init:function(){this._super(),this.classNames.push(this.getWrapperConfig("errorClass")),Ember.Binding.from("context.errors."+this.property).to("errors").connect(this)},templateName:"easyForm/error"})}(),function(){Ember.EasyForm.Form=Ember.EasyForm.BaseView.extend({tagName:"form",attributeBindings:["novalidate"],novalidate:"novalidate",wrapper:"default",init:function(){this._super(),this.classNames.push(this.getWrapperConfig("formClass")),this.action=this.action||"submit"},submit:function(e){var t,r=this;e&&e.preventDefault(),Ember.isNone(this.get("context.validate"))?this.get("controller").send(this.action):(t=Ember.isNone(this.get("context").validate)?this.get("context.content").validate():this.get("context").validate(),t.then(function(){r.get("context.isValid")&&r.get("controller").send(r.action)}))}})}(),function(){Ember.EasyForm.Hint=Ember.EasyForm.BaseView.extend({tagName:"span",init:function(){this._super(),this.classNames.push(this.getWrapperConfig("hintClass"))},render:function(e){e.push(Handlebars.Utils.escapeExpression(this.get("text")))},textChanged:function(){this.rerender()}.observes("text")})}(),function(){Ember.EasyForm.Input=Ember.EasyForm.BaseView.extend({init:function(){this._super(),this.classNameBindings.push("showError:"+this.getWrapperConfig("fieldErrorClass")),this.classNames.push(this.getWrapperConfig("inputClass")),Ember.defineProperty(this,"showError",Ember.computed.and("canShowValidationError","context.errors."+this.property+".firstObject")),this.isBlock||(this.getWrapperConfig("wrapControls")?this.set("templateName","easyForm/wrapped_input"):this.set("templateName","easyForm/input"))},setupValidationDependencies:function(){var e,t=this.get("context._dependentValidationKeys");if(t)for(e in t)t[e].contains(this.property)&&this._keysForValidationDependencies.pushObject(e)}.on("init"),_keysForValidationDependencies:Ember.A(),dependentValidationKeyCanTrigger:!1,tagName:"div",classNames:["string"],didInsertElement:function(){this.set("label-field-"+this.elementId+".for",this.get("input-field-"+this.elementId+".elementId"))},concatenatedProperties:["inputOptions","bindableInputOptions"],inputOptions:["as","inputConfig","collection","optionValuePath","optionLabelPath","selection","value"],bindableInputOptions:["placeholder","prompt"],controlsWrapperClass:function(){return this.getWrapperConfig("controlsWrapperClass")}.property(),inputOptionsValues:function(){var e,t,r,s,i={},n=this.inputOptions,a=this.bindableInputOptions;for(e=0;e<n.length;e++)r=n[e],t=this.get(r),t&&("boolean"==typeof t&&(t=r),i[r]=t);for(e=0;e<a.length;e++)r=a[e],s=r+"Binding",(this.get(r)||this.get(s))&&(i[s]="view."+r);return i}.property(),focusOut:function(){this.set("hasFocusedOut",!0),this.showValidationError()},showValidationError:function(){this.get("hasFocusedOut")&&(Ember.isEmpty(this.get("context.errors."+this.property))?this.set("canShowValidationError",!1):this.set("canShowValidationError",!0))},input:function(){this._keysForValidationDependencies.forEach(function(e){this.get("parentView.childViews").forEach(function(t){t.property===e&&t.showValidationError()},this)},this)}})}(),function(){Ember.EasyForm.Label=Ember.EasyForm.BaseView.extend({tagName:"label",attributeBindings:["for"],labelText:function(){return this.get("text")||this.get("property").underscore().split("_").join(" ").capitalize()}.property("text","property"),init:function(){this._super(),this.classNames.push(this.getWrapperConfig("labelClass"))},render:function(e){e.push(Handlebars.Utils.escapeExpression(this.get("labelText")))},labelTextChanged:function(){this.rerender()}.observes("labelText")})}(),function(){Ember.EasyForm.Select=Ember.Select.extend()}(),function(){Ember.EasyForm.Submit=Ember.View.extend({tagName:"input",attributeBindings:["type","value","disabled"],type:"submit",disabled:function(){return this.get("context.isInvalid")}.property("context.isInvalid"),init:function(){this._super(),this.set("value",this.value)}})}(),function(){Ember.EasyForm.TextArea=Ember.TextArea.extend()}(),function(){Ember.EasyForm.TextField=Ember.TextField.extend()}(),function(){Ember.TEMPLATES["easyForm/error"]=Ember.Handlebars.template(function(e,t,r,s,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),i=i||{};var n,a,o=this.escapeExpression;n={},a={},i.buffer.push(o(r._triageMustache.call(t,"view.errors.firstObject",{hash:{},contexts:[t],types:["ID"],hashContexts:a,hashTypes:n,data:i})))})}(),function(){Ember.TEMPLATES["easyForm/input"]=Ember.Handlebars.template(function(e,t,r,s,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),i=i||{};var n,a,o,p,h="",l=r.helperMissing,u=this.escapeExpression;return a={propertyBinding:t,textBinding:t},o={propertyBinding:"ID",textBinding:"ID"},p={hash:{propertyBinding:"view.property",textBinding:"view.label"},contexts:[],types:[],hashContexts:a,hashTypes:o,data:i},i.buffer.push(u((n=r["label-field"]||t["label-field"],n?n.call(t,p):l.call(t,"label-field",p)))),o={},a={},p={hash:{},contexts:[t],types:["STRING"],hashContexts:a,hashTypes:o,data:i},i.buffer.push(u((n=r.partial||t.partial,n?n.call(t,"easyForm/inputControls",p):l.call(t,"partial","easyForm/inputControls",p)))),h})}(),function(){Ember.TEMPLATES["easyForm/inputControls"]=Ember.Handlebars.template(function(e,t,r,s,i){function n(e,t){var s,i,n,a;i={propertyBinding:e},n={propertyBinding:"ID"},a={hash:{propertyBinding:"view.property"},contexts:[],types:[],hashContexts:i,hashTypes:n,data:t},t.buffer.push(d((s=r["error-field"]||e["error-field"],s?s.call(e,a):c.call(e,"error-field",a))))}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),i=i||{};var a,o,p,h,l,u="",c=r.helperMissing,d=this.escapeExpression,m=this;return p={propertyBinding:t,inputOptionsBinding:t},h={propertyBinding:"ID",inputOptionsBinding:"ID"},l={hash:{propertyBinding:"view.property",inputOptionsBinding:"view.inputOptionsValues"},contexts:[],types:[],hashContexts:p,hashTypes:h,data:i},i.buffer.push(d((a=r["input-field"]||t["input-field"],a?a.call(t,l):c.call(t,"input-field",l)))),h={},p={},o=r["if"].call(t,"view.showError",{hash:{},inverse:m.noop,fn:m.program(1,n,i),contexts:[t],types:["ID"],hashContexts:p,hashTypes:h,data:i}),(o||0===o)&&i.buffer.push(o),p={propertyBinding:t,textBinding:t},h={propertyBinding:"ID",textBinding:"ID"},l={hash:{propertyBinding:"view.property",textBinding:"view.hint"},contexts:[],types:[],hashContexts:p,hashTypes:h,data:i},i.buffer.push(d((a=r["hint-field"]||t["hint-field"],a?a.call(t,l):c.call(t,"hint-field",l)))),u})}(),function(){Ember.TEMPLATES["easyForm/wrapped_input"]=Ember.Handlebars.template(function(e,t,r,s,i){this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),i=i||{};var n,a,o,p,h="",l=r.helperMissing,u=this.escapeExpression;return a={propertyBinding:t,textBinding:t},o={propertyBinding:"ID",textBinding:"ID"},p={hash:{propertyBinding:"view.property",textBinding:"view.label"},contexts:[],types:[],hashContexts:a,hashTypes:o,data:i},i.buffer.push(u((n=r["label-field"]||t["label-field"],n?n.call(t,p):l.call(t,"label-field",p)))),i.buffer.push('<div class="'),o={},a={},i.buffer.push(u(r.unbound.call(t,"view.controlsWrapperClass",{hash:{},contexts:[t],types:["ID"],hashContexts:a,hashTypes:o,data:i}))),i.buffer.push('">'),o={},a={},p={hash:{},contexts:[t],types:["STRING"],hashContexts:a,hashTypes:o,data:i},i.buffer.push(u((n=r.partial||t.partial,n?n.call(t,"easyForm/inputControls",p):l.call(t,"partial","easyForm/inputControls",p)))),i.buffer.push("</div>"),h})}(),function(){Ember.EasyForm.objectNameFor=function(e){var t=e.constructor.toString().split(".");return t[t.length-1].underscore()},Ember.EasyForm.processOptions=function(e,t){return t?t.hash.property=e:t=e,t}}(),"undefined"==typeof location||"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname||Ember.Logger.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website.");